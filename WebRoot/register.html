<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Register Your Account</title>
    <!-- Custom styles for this template -->
    <link href="css/signin.css" rel="stylesheet">
    <link rel="icon" href="shop.png">
    <link href="assets/css/ie10-viewport-bug-workaround.css" rel="stylesheet">
    <link rel='stylesheet' href='css/nprogress.css'/>
    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/animate.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <form class="form-signin" onsubmit="return false">
            <h2 class="form-signin-heading wow bounceInDown">Register Your Account</h2>
            <label>用户名</label>
            <input type="text" id="user" class="form-control wow bounceInLeft" placeholder="UserID" autofocus>
            <label>密码</label>
            <input type="password" id="password" class="form-control wow bounceInRight" placeholder="Password" >
            <button id="sub" class="btn btn-lg btn-primary btn-block wow bounceInUp" type="submit">Register</button><br>
            <div id="div_hide" class="hidden">
            <div id="success_hide" class="alert alert-success hidden" role="alert">
                <strong id="success_tip"></strong><span id="span_success_tip"></span>
            </div>
            <div id="error_hide" class="alert alert-danger hidden" role="alert">
                <strong id="error_tip"></strong><span id="span_error_tip"></span>
            </div>
            </div>
            </div>
        </form>
    </div> <!-- /container -->

    <script src="js/wow.min.js"></script>
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="assets/js/ie-emulation-modes-warning.js"></script>
    <script src='js/nprogress.js'></script>
    <script src="js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="assets/js/ie10-viewport-bug-workaround.js"></script>
    <script> 
      new WOW().init();
    </script>
    <script src="js_own/nprogressapply.js"></script>
    <script src=""></script>
    <script>
        $(function(){
          $("#sub").click(function(){
            var user = $("#user").val();
            console.log("user:"+user);
            console.log("password:"+password);
            console.log(user=="");
            console.log($("#password").val()=="");
            if(user==""){
                $("#div_hide").removeClass("hidden");
                $("#error_hide").removeClass("hidden");
                $("#error_tip").text("UserID不可为空");
                return;
            }
            if($("#password").val()==""){
                $("#div_hide").removeClass("hidden");
                $("#error_hide").removeClass("hidden");
                $("#error_tip").text("Password不可为空");
                return;
            }
            else{
                $.ajax({
                    type: "post",
                    url: "servlet/Register",
                    dataType: "json",
                    async: false,
                    data:{
                    "user": user,
                    "password": $("#password").val(),
                    type: "ajax_register"
                    },
                    success:function(data){
                        console.log("json.status:"+data.status);
                        console.log("json.user:"+data.user);
                        if(data.status=="success"){
                            $("#error_hide").addClass("hidden");
                            $("#div_hide").removeClass("hidden");
                            $("#success_hide").removeClass("hidden");
                            $("#success_tip").text(data.message);
                            setTimeout("location.href = 'index.html'",1000);
                        }
                        if(data.status=="error"){
                            $("#div_hide").removeClass("hidden");
                            $("#error_hide").removeClass("hidden");
                            $("#error_tip").text(data.message);
                            //return;
                        }
                    },
                    error:function(XMLResponse){
                        $("#div_hide").removeClass("hidden");
                        $("#error_hide").removeClass("hidden");
                        $("#error_tip").text("抱歉，服务器异常\nXMLResponse_status:"+XMLResponse.status);
                        console.log("error_status:"+XMLResponse.status);
                        //return;
                    }
                });
            }
          }); 
        });
    </script>
</body>
</html>